<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>2ead1c04f53641c29aa94c9726b4742b</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<div id="2e4aaf24" class="cell code" data-execution_count="24">
<div class="sourceCode" id="cb1"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os, pandas <span class="im">as</span> pd, numpy <span class="im">as</span> np</span></code></pre></div>
</div>
<div id="65e15554" class="cell code" data-execution_count="25">
<div class="sourceCode" id="cb2"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>os.chdir(<span class="st">&quot;D://CHRIST//Boot camp//DATA&quot;</span>)</span></code></pre></div>
</div>
<div id="5e00e6fa-5bba-4c67-ba5b-86f1e518632c" class="cell markdown">
<p>We want to understand which combination of attributes &amp; levels of
pizza is most and least preferred by customers while choosing or
ordering pizza so that the marketing team can enter the market with the
best combinations.</p>
<p>The first step is to define the attributes and levels of the
product.</p>
<p>We will take eight different attributes, namely ‘brand,’ ‘price,’
‘weight,’ ‘crust,’ ‘cheese,’ ‘size,’ ‘toppings,’ and ‘spicy,’ where
brand, price, and weight have four levels each and rest of the
attributes have two levels.</p>
</div>
<div id="98bb2910-8728-45a0-a31e-bc65e5370fc1" class="cell markdown">
<p><img
src="https://av-eks-blogoptimized.s3.amazonaws.com/Capture0001-thumbnail_webp-600x300.png"
alt="attribute info" /></p>
</div>
<div id="63b6a92c-36dc-4c28-92e2-a5649948fefc" class="cell markdown">
<p>The next step is to select the number of combinations or profiles.
Here, we have a total 4<em>4</em>4<em>2</em>2<em>2</em>2*2 number of
combinations. But we will not use all combinations since the company may
not be able to produce some combinations, and the customers may not
prefer some combinations. So, we will go with the selected 16
combinations and their rankings from a survey. We will load the dataset
in the proper format.</p>
</div>
<div id="50922431-8756-4294-9e0c-09f03bec0b1d" class="cell code"
data-execution_count="26">
<div class="sourceCode" id="cb3"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd, numpy <span class="im">as</span> np</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>df<span class="op">=</span>pd.read_csv(<span class="st">&#39;pizza_data.csv&#39;</span>)</span></code></pre></div>
</div>
<div id="95e45992-5823-4dbc-9a09-ca5e351cfc9a" class="cell markdown">
<p>We will now estimate each attribute level’s effects using Linear
Regression Model.</p>
</div>
<div id="133fbadc-f817-422e-ab55-bd2bc08cfaf3" class="cell code"
data-execution_count="27">
<div class="sourceCode" id="cb4"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.formula.api <span class="im">as</span> smf</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>model<span class="op">=</span><span class="st">&#39;ranking ~ C(brand,Sum)+C(price,Sum)+C(weight,Sum)+C(crust,Sum)+C(cheese,Sum)+C(size,Sum)+C(toppings,Sum)+C(spicy,Sum)&#39;</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>model_fit<span class="op">=</span>smf.ols(model,data<span class="op">=</span>df).fit()</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(model_fit.summary())</span></code></pre></div>
<div class="output stream stdout">
<pre><code>                            OLS Regression Results                            
==============================================================================
Dep. Variable:                ranking   R-squared:                       0.999
Model:                            OLS   Adj. R-squared:                  0.989
Method:                 Least Squares   F-statistic:                     97.07
Date:                Sun, 07 Jul 2024   Prob (F-statistic):             0.0794
Time:                        13:43:53   Log-Likelihood:                 10.568
No. Observations:                  16   AIC:                             8.864
Df Residuals:                       1   BIC:                             20.45
Df Model:                          14                                         
Covariance Type:            nonrobust                                         
================================================================================================
                                   coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------------------------
Intercept                        8.5000      0.125     68.000      0.009       6.912      10.088
C(brand, Sum)[S.Dominos]      6.661e-16      0.217   3.08e-15      1.000      -2.751       2.751
C(brand, Sum)[S.Onesta]       1.776e-15      0.217    8.2e-15      1.000      -2.751       2.751
C(brand, Sum)[S.Oven Story]     -0.2500      0.217     -1.155      0.454      -3.001       2.501
C(price, Sum)[S.$1.00]           0.7500      0.217      3.464      0.179      -2.001       3.501
C(price, Sum)[S.$2.00]       -5.995e-15      0.217  -2.77e-14      1.000      -2.751       2.751
C(price, Sum)[S.$3.00]        6.661e-15      0.217   3.08e-14      1.000      -2.751       2.751
C(weight, Sum)[S.100g]           5.0000      0.217     23.094      0.028       2.249       7.751
C(weight, Sum)[S.200g]           2.0000      0.217      9.238      0.069      -0.751       4.751
C(weight, Sum)[S.300g]          -1.2500      0.217     -5.774      0.109      -4.001       1.501
C(crust, Sum)[S.thick]           1.7500      0.125     14.000      0.045       0.162       3.338
C(cheese, Sum)[S.Cheddar]       -0.2500      0.125     -2.000      0.295      -1.838       1.338
C(size, Sum)[S.large]           -0.2500      0.125     -2.000      0.295      -1.838       1.338
C(toppings, Sum)[S.mushroom]     1.1250      0.125      9.000      0.070      -0.463       2.713
C(spicy, Sum)[S.extra]           0.7500      0.125      6.000      0.105      -0.838       2.338
==============================================================================
Omnibus:                       30.796   Durbin-Watson:                   2.000
Prob(Omnibus):                  0.000   Jarque-Bera (JB):                2.667
Skew:                           0.000   Prob(JB):                        0.264
Kurtosis:                       1.000   Cond. No.                         2.00
==============================================================================

Notes:
[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.
</code></pre>
</div>
<div class="output stream stderr">
<pre><code>D:\CHRIST\PYTHON\Lib\site-packages\scipy\stats\_stats_py.py:1806: UserWarning: kurtosistest only valid for n&gt;=20 ... continuing anyway, n=16
  warnings.warn(&quot;kurtosistest only valid for n&gt;=20 ... continuing &quot;
</code></pre>
</div>
</div>
<div id="b51f0c3d-8cbf-4f27-bade-7fdc96a8a5b1" class="cell markdown">
<p>We can analyze the model’s fitness using parameters like R-squared,
p-values, etc. The coefficients of each attribute level define its
effect on the overall choice model.</p>
<p>Now, we will create the list of conjoint attributes.</p>
</div>
<div id="bf601b5e-64ed-4a32-b792-6eed8f353869" class="cell code"
data-execution_count="28">
<div class="sourceCode" id="cb7"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>conjoint_attributes <span class="op">=</span> [<span class="st">&#39;brand&#39;</span>,<span class="st">&#39;price&#39;</span>,<span class="st">&#39;weight&#39;</span>,<span class="st">&#39;crust&#39;</span>,<span class="st">&#39;cheese&#39;</span>,<span class="st">&#39;size&#39;</span>,<span class="st">&#39;toppings&#39;</span>,<span class="st">&#39;spicy&#39;</span>]</span></code></pre></div>
</div>
<div id="27239010-d2b7-4af7-aa65-ff11ed416137" class="cell markdown">
<p>Before going ahead, we need to understand these conjoint analysis
terminologies:</p>
<p>Relative importance: It depicts which attributes are more or less
important when purchasing. E.g., a Mobile Phone’s Relative importance
could be Brand 30%, Price 30%, Size 20%, Battery Life 10%, and Color
10%.</p>
<p>Part-Worths/Utility values: The amount of weight an attribute level
carries with a respondent. These factors lead to a product’s overall
value to consumers.</p>
<p>Next, we will build part-worths information and calculate
attribute-wise importance level.</p>
</div>
<div id="f9db88aa-39fa-4f24-8745-933fadc231a9" class="cell code"
data-execution_count="29">
<div class="sourceCode" id="cb8"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>level_name <span class="op">=</span> []</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>part_worth <span class="op">=</span> []</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>part_worth_range <span class="op">=</span> []</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>important_levels <span class="op">=</span> {}</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>end <span class="op">=</span> <span class="dv">1</span>  <span class="co"># Initialize index for coefficient in params</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> item <span class="kw">in</span> conjoint_attributes:</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    nlevels <span class="op">=</span> <span class="bu">len</span>(<span class="bu">list</span>(np.unique(df[item])))</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    level_name.append(<span class="bu">list</span>(np.unique(df[item])))</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    begin <span class="op">=</span> end</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    end <span class="op">=</span> begin <span class="op">+</span> nlevels <span class="op">-</span><span class="dv">1</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    new_part_worth <span class="op">=</span> <span class="bu">list</span>(model_fit.params[begin:end])</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    new_part_worth.append((<span class="op">-</span><span class="dv">1</span>)<span class="op">*</span><span class="bu">sum</span>(new_part_worth))</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    important_levels[item] <span class="op">=</span> np.argmax(new_part_worth)</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    part_worth.append(new_part_worth)</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(item)</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>    <span class="co">#print(part_worth)</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>    part_worth_range.append(<span class="bu">max</span>(new_part_worth) <span class="op">-</span> <span class="bu">min</span>(new_part_worth))</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># next iteration</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;-------------------------------------------------------------&quot;</span>)</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;level name:&quot;</span>)</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(level_name)</span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;npw with sum element:&quot;</span>)</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(new_part_worth)</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;imp level:&quot;</span>)</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(important_levels)</span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;part worth:&quot;</span>)</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(part_worth)</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;part_worth_range:&quot;</span>)</span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(part_worth_range)</span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">len</span>(part_worth))</span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;important levels:&quot;</span>)</span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(important_levels)</span></code></pre></div>
<div class="output stream stdout">
<pre><code>brand
price
weight
crust
cheese
size
toppings
spicy
-------------------------------------------------------------
level name:
[[&#39;Dominos&#39;, &#39;Onesta&#39;, &#39;Oven Story&#39;, &#39;Pizza hut&#39;], [&#39;$1.00&#39;, &#39;$2.00&#39;, &#39;$3.00&#39;, &#39;$4.00&#39;], [&#39;100g&#39;, &#39;200g&#39;, &#39;300g&#39;, &#39;400g&#39;], [&#39;thick&#39;, &#39;thin&#39;], [&#39;Cheddar&#39;, &#39;Mozzarella&#39;], [&#39;large&#39;, &#39;regular&#39;], [&#39;mushroom&#39;, &#39;paneer&#39;], [&#39;extra&#39;, &#39;normal&#39;]]
npw with sum element:
[0.7499999999999996, -0.7499999999999996]
imp level:
{&#39;brand&#39;: 3, &#39;price&#39;: 0, &#39;weight&#39;: 0, &#39;crust&#39;: 0, &#39;cheese&#39;: 1, &#39;size&#39;: 1, &#39;toppings&#39;: 0, &#39;spicy&#39;: 0}
part worth:
[[6.661338147750939e-16, 1.7763568394002505e-15, -0.2500000000000031, 0.25000000000000067], [0.7499999999999996, -5.995204332975845e-15, 6.661338147750939e-15, -0.7500000000000002], [5.000000000000004, 1.999999999999988, -1.2499999999999916, -5.750000000000002], [1.7500000000000004, -1.7500000000000004], [-0.25000000000000044, 0.25000000000000044], [-0.2500000000000006, 0.2500000000000006], [1.1249999999999996, -1.1249999999999996], [0.7499999999999996, -0.7499999999999996]]
part_worth_range:
[0.5000000000000038, 1.4999999999999998, 10.750000000000007, 3.500000000000001, 0.5000000000000009, 0.5000000000000012, 2.249999999999999, 1.4999999999999991]
8
important levels:
{&#39;brand&#39;: 3, &#39;price&#39;: 0, &#39;weight&#39;: 0, &#39;crust&#39;: 0, &#39;cheese&#39;: 1, &#39;size&#39;: 1, &#39;toppings&#39;: 0, &#39;spicy&#39;: 0}
</code></pre>
</div>
</div>
<div id="90a3064c-113f-463a-a3ec-4d9837543a6b" class="cell markdown">
<p>Now, we will calculate the importance of each attribute.</p>
</div>
<div id="d83ba72c-de0b-428f-8d00-67020f0570c2" class="cell code"
data-execution_count="30">
<div class="sourceCode" id="cb10"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>attribute_importance <span class="op">=</span> []</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> part_worth_range:</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">#print(i)</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    attribute_importance.append(<span class="bu">round</span>(<span class="dv">100</span><span class="op">*</span>(i<span class="op">/</span><span class="bu">sum</span>(part_worth_range)),<span class="dv">2</span>))</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(attribute_importance)</span></code></pre></div>
<div class="output stream stdout">
<pre><code>[2.38, 7.14, 51.19, 16.67, 2.38, 2.38, 10.71, 7.14]
</code></pre>
</div>
</div>
<div id="2f9ea8f7-a098-4429-a968-75904e08bc6b" class="cell markdown">
<p>Now, we will calculate the part-worths of each attribute level.</p>
</div>
<div id="9c086ef5-df8b-4fce-8065-cbe91f18d8f1" class="cell code"
data-execution_count="31">
<div class="sourceCode" id="cb12"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>part_worth_dict<span class="op">=</span>{}</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>attrib_level<span class="op">=</span>{}</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> item,i <span class="kw">in</span> <span class="bu">zip</span>(conjoint_attributes,<span class="bu">range</span>(<span class="dv">0</span>,<span class="bu">len</span>(conjoint_attributes))):</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;Attribute :&quot;</span>,item)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;    Relative importance of attribute &quot;</span>,attribute_importance[i])</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;    Level wise part worths: &quot;</span>)</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>,<span class="bu">len</span>(level_name[i])):</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(i)</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(j)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">&quot;          </span><span class="sc">{}</span><span class="st">:</span><span class="sc">{}</span><span class="st">&quot;</span>.<span class="bu">format</span>(level_name[i][j],part_worth[i][j]))</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>        part_worth_dict[level_name[i][j]]<span class="op">=</span>part_worth[i][j]</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>        attrib_level[item]<span class="op">=</span>(level_name[i])</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>        <span class="co">#print(j)</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>part_worth_dict</span></code></pre></div>
<div class="output stream stdout">
<pre><code>Attribute : brand
    Relative importance of attribute  2.38
    Level wise part worths: 
0
0
          Dominos:6.661338147750939e-16
0
1
          Onesta:1.7763568394002505e-15
0
2
          Oven Story:-0.2500000000000031
0
3
          Pizza hut:0.25000000000000067
Attribute : price
    Relative importance of attribute  7.14
    Level wise part worths: 
1
0
          $1.00:0.7499999999999996
1
1
          $2.00:-5.995204332975845e-15
1
2
          $3.00:6.661338147750939e-15
1
3
          $4.00:-0.7500000000000002
Attribute : weight
    Relative importance of attribute  51.19
    Level wise part worths: 
2
0
          100g:5.000000000000004
2
1
          200g:1.999999999999988
2
2
          300g:-1.2499999999999916
2
3
          400g:-5.750000000000002
Attribute : crust
    Relative importance of attribute  16.67
    Level wise part worths: 
3
0
          thick:1.7500000000000004
3
1
          thin:-1.7500000000000004
Attribute : cheese
    Relative importance of attribute  2.38
    Level wise part worths: 
4
0
          Cheddar:-0.25000000000000044
4
1
          Mozzarella:0.25000000000000044
Attribute : size
    Relative importance of attribute  2.38
    Level wise part worths: 
5
0
          large:-0.2500000000000006
5
1
          regular:0.2500000000000006
Attribute : toppings
    Relative importance of attribute  10.71
    Level wise part worths: 
6
0
          mushroom:1.1249999999999996
6
1
          paneer:-1.1249999999999996
Attribute : spicy
    Relative importance of attribute  7.14
    Level wise part worths: 
7
0
          extra:0.7499999999999996
7
1
          normal:-0.7499999999999996
</code></pre>
</div>
<div class="output execute_result" data-execution_count="31">
<pre><code>{&#39;Dominos&#39;: 6.661338147750939e-16,
 &#39;Onesta&#39;: 1.7763568394002505e-15,
 &#39;Oven Story&#39;: -0.2500000000000031,
 &#39;Pizza hut&#39;: 0.25000000000000067,
 &#39;$1.00&#39;: 0.7499999999999996,
 &#39;$2.00&#39;: -5.995204332975845e-15,
 &#39;$3.00&#39;: 6.661338147750939e-15,
 &#39;$4.00&#39;: -0.7500000000000002,
 &#39;100g&#39;: 5.000000000000004,
 &#39;200g&#39;: 1.999999999999988,
 &#39;300g&#39;: -1.2499999999999916,
 &#39;400g&#39;: -5.750000000000002,
 &#39;thick&#39;: 1.7500000000000004,
 &#39;thin&#39;: -1.7500000000000004,
 &#39;Cheddar&#39;: -0.25000000000000044,
 &#39;Mozzarella&#39;: 0.25000000000000044,
 &#39;large&#39;: -0.2500000000000006,
 &#39;regular&#39;: 0.2500000000000006,
 &#39;mushroom&#39;: 1.1249999999999996,
 &#39;paneer&#39;: -1.1249999999999996,
 &#39;extra&#39;: 0.7499999999999996,
 &#39;normal&#39;: -0.7499999999999996}</code></pre>
</div>
</div>
<div id="88a6b115-49a9-4506-b6e1-3df86c4ce7b9" class="cell markdown">
<p>In the next step, we will plot the relative importance of
attributes.</p>
</div>
<div id="f0ac1a33-5ea1-4e63-a67b-f74f7257e73a" class="cell code"
data-execution_count="32">
<div class="sourceCode" id="cb15"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">5</span>))</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>sns.barplot(x<span class="op">=</span>conjoint_attributes,y<span class="op">=</span>attribute_importance)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Relative importance of attributes&#39;</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;Attributes&#39;</span>)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Importance&#39;</span>)</span></code></pre></div>
<div class="output execute_result" data-execution_count="32">
<pre><code>Text(0, 0.5, &#39;Importance&#39;)</code></pre>
</div>
<div class="output display_data">
<p><img
src="vertopal_c24ac4bba6424b82b72f7bd4ffe95c03/447bc2a0309ab2ffc8c8f06852b020a6cfa96272.png" /></p>
</div>
</div>
<div id="6d4c3d88-64e6-4f32-b527-2a41fb67451a" class="cell markdown">
<p>We can see that weight is the attribute with the highest relative
importance at 51%, followed by crust at 16% and toppings at 10%. Brand,
cheese, and size are the least important attributes, each at 2.38%.</p>
<p>Now, we will calculate the utility score for each profile.</p>
</div>
<div id="e870d586-d5a7-47c6-bc34-62a230dd602a" class="cell code"
data-execution_count="33">
<div class="sourceCode" id="cb17"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>utility <span class="op">=</span> []</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(df.shape[<span class="dv">0</span>]):</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    score <span class="op">=</span> part_worth_dict[df[<span class="st">&#39;brand&#39;</span>][i]]<span class="op">+</span>part_worth_dict[df[<span class="st">&#39;price&#39;</span>][i]]<span class="op">+</span>part_worth_dict[df[<span class="st">&#39;weight&#39;</span>][i]]<span class="op">+</span>part_worth_dict[df[<span class="st">&#39;crust&#39;</span>][i]]<span class="op">+</span>part_worth_dict[df[<span class="st">&#39;cheese&#39;</span>][i]]<span class="op">+</span>part_worth_dict[df[<span class="st">&#39;size&#39;</span>][i]]<span class="op">+</span>part_worth_dict[df[<span class="st">&#39;toppings&#39;</span>][i]]<span class="op">+</span>part_worth_dict[df[<span class="st">&#39;spicy&#39;</span>][i]]</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    utility.append(score)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&#39;utility&#39;</span>] <span class="op">=</span> utility</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>utility</span></code></pre></div>
<div class="output execute_result" data-execution_count="33">
<pre><code>[2.6250000000000053,
 3.37500000000001,
 0.37499999999999023,
 -6.375,
 -0.37499999999999734,
 4.3749999999999885,
 -1.374999999999982,
 -4.624999999999993,
 -3.625000000000007,
 7.625,
 -5.375000000000002,
 -2.3750000000000218,
 1.3750000000000058,
 6.375000000000002,
 -7.6249999999999964,
 5.624999999999995]</code></pre>
</div>
</div>
<div id="3ccf8cc8-794f-4993-882f-e7fc3f039517" class="cell markdown">
<p>We can see that combination number 9 has the maximum utility,
followed by combination numbers 13 and 5. Combination number 14 is the
least desirable because of the most negative utility score.</p>
<p>Now, we will find the combination with maximum utility.</p>
</div>
<div id="5e142b1a-e6a7-4aa0-88b5-a6837bc264ae" class="cell code"
data-execution_count="34">
<div class="sourceCode" id="cb19"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;The profile that has the highest utility score :&quot;</span>,<span class="st">&#39;</span><span class="ch">\n</span><span class="st">&#39;</span>, df.iloc[np.argmax(utility)])</span></code></pre></div>
<div class="output stream stdout">
<pre><code>The profile that has the highest utility score : 
 brand       Oven Story
price            $4.00
weight            100g
crust            thick
cheese      Mozzarella
size             large
toppings      mushroom
spicy            extra
ranking             16
utility          7.625
Name: 9, dtype: object
</code></pre>
</div>
</div>
<div id="8b0b5532-29c7-4e53-8320-e00d8e7141bc" class="cell markdown">
<p>Now, we will determine the levels being preferred in each
attribute.</p>
</div>
<div id="ea928881-8e06-4242-bfe2-e5cdd14b65e9" class="cell code"
data-execution_count="35">
<div class="sourceCode" id="cb21"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i,j <span class="kw">in</span> <span class="bu">zip</span>(attrib_level.keys(),<span class="bu">range</span>(<span class="dv">0</span>,<span class="bu">len</span>(conjoint_attributes))):</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">#print(i)</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">#level_name[j]</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;Preferred level in </span><span class="sc">{}</span><span class="st"> is :: </span><span class="sc">{}</span><span class="st">&quot;</span>.<span class="bu">format</span>(i,level_name[j][important_levels[i]]))</span></code></pre></div>
<div class="output stream stdout">
<pre><code>Preferred level in brand is :: Pizza hut
Preferred level in price is :: $1.00
Preferred level in weight is :: 100g
Preferred level in crust is :: thick
Preferred level in cheese is :: Mozzarella
Preferred level in size is :: regular
Preferred level in toppings is :: mushroom
Preferred level in spicy is :: extra
</code></pre>
</div>
</div>
</body>
</html>
